# Production Profile Configuration
# Optimized for performance and security

# Database Configuration
spring.datasource.url=jdbc:postgresql://localhost:5432/quizdb
spring.datasource.username=quizuser
spring.datasource.password=quizpass
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=false
spring.jpa.properties.hibernate.use_sql_comments=false

# PRODUCTION OPTIMIZATION: Disable open-in-view for better performance
spring.jpa.open-in-view=false

# SECURITY FIX: Disable SQL parameter logging
spring.jpa.properties.hibernate.type.descriptor.sql.BasicBinder=org.hibernate.type.descriptor.sql.BasicBinder
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=OFF
logging.level.org.hibernate.SQL=OFF
logging.level.org.hibernate.type=OFF

# SECURITY: Reduce sensitive information in logs
logging.level.org.springframework.security=WARN
logging.level.org.springframework.web=WARN
logging.level.org.springframework.cache=WARN
logging.level.org.springframework.data.redis=WARN
logging.level.org.springframework.orm.jpa=WARN
logging.level.org.hibernate.engine.internal.StatisticalLoggingSessionEventListener=OFF
logging.level.org.hibernate.stat=OFF

# Cache Configuration
spring.cache.type=redis
spring.cache.redis.time-to-live=3600000
spring.cache.redis.cache-null-values=false

# Redis Configuration
spring.data.redis.host=localhost
spring.data.redis.port=6379
spring.data.redis.password=
spring.data.redis.database=0
spring.data.redis.timeout=2000ms
spring.data.redis.jedis.pool.max-active=8
spring.data.redis.jedis.pool.max-idle=8
spring.data.redis.jedis.pool.min-idle=0

# Performance Optimizations
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# Connection Pool Configuration
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.connection-timeout=30000
spring.datasource.hikari.idle-timeout=600000
spring.datasource.hikari.max-lifetime=1800000

# Security Configuration
spring.security.user.name=admin
spring.security.user.password=admin123

# Application Configuration
server.port=8080
spring.application.name=online-quiz-system

# FIXED: UTF-8 Encoding Configuration for OAuth2 redirects
server.servlet.encoding.charset=UTF-8
server.servlet.encoding.enabled=true
server.servlet.encoding.force=true
server.tomcat.uri-encoding=UTF-8

# FIXED: Session Configuration for OAuth2
server.servlet.session.timeout=30m
server.servlet.session.cookie.max-age=1800
server.servlet.session.cookie.http-only=true
server.servlet.session.cookie.secure=false

# Logging Configuration - SECURITY FIX
logging.level.com.example.online_quiz_system=DEBUG
logging.level.org.springframework.security=WARN
logging.level.org.hibernate=WARN
logging.level.org.springframework.cache=WARN
logging.level.org.springframework.scheduling=WARN

# Disable sensitive logging
logging.level.org.springframework.web.filter.CommonsRequestLoggingFilter=OFF
logging.level.org.springframework.security.web.FilterChainProxy=OFF

# Performance Monitoring - Disabled for security
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=never
management.info.env.enabled=false

# FIXED: Disable monitoring by default
app.monitoring.consistency.enabled=false
app.monitoring.scheduling.enabled=false

# JWT Configuration - FIXED: Added missing JWT properties
app.jwt.secret=mySecretKey123456789012345678901234567890123456789012345678901234567890
app.jwt.expiration-ms=86400000
app.jwt.refresh-expiration-ms=604800000

# Email Configuration - Gmail SMTP
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=doanviettu09122002@gmail.com
spring.mail.password=vsjryffmakcvojlq
spring.mail.properties.mail.smtp.auth=true

# MinIO Configuration
app.minio.endpoint=http://localhost:9000
app.minio.access-key=minio
app.minio.secret-key=minio123
app.minio.bucket-name=avatars
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.gmail.com
spring.mail.properties.mail.debug=true
spring.mail.default-encoding=UTF-8
spring.mail.properties.mail.smtp.connectiontimeout=5000
spring.mail.properties.mail.smtp.timeout=3000
spring.mail.properties.mail.smtp.writetimeout=5000

# FIXED: Disable mock email for production
app.email.mock=false

# Frontend Configuration - FIXED: Added missing frontend origin
app.frontend.origin=http://localhost:3000

# OAuth2 Configuration - UPDATED GOOGLE CREDENTIALS (OIDC DISABLED)
spring.security.oauth2.client.registration.google.client-id=876217209626-thtrq8duhqm4klgmmd8rrvetp33f6qml.apps.googleusercontent.com
spring.security.oauth2.client.registration.google.client-secret=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
spring.security.oauth2.client.registration.google.scope=profile,email
spring.security.oauth2.client.registration.google.redirect-uri=http://localhost:8080/login/oauth2/code/google

spring.security.oauth2.client.registration.facebook.client-id=1451200836151168
spring.security.oauth2.client.registration.facebook.client-secret=a785877528258f0130c717003e50636a
spring.security.oauth2.client.registration.facebook.scope=email,public_profile
spring.security.oauth2.client.registration.facebook.redirect-uri=http://localhost:8080/login/oauth2/code/facebook

spring.security.oauth2.client.provider.google.authorization-uri=https://accounts.google.com/o/oauth2/v2/auth
spring.security.oauth2.client.provider.google.token-uri=https://oauth2.googleapis.com/token
spring.security.oauth2.client.provider.google.user-info-uri=https://www.googleapis.com/oauth2/v2/userinfo
spring.security.oauth2.client.provider.google.user-name-attribute=id

spring.security.oauth2.client.provider.facebook.authorization-uri=https://www.facebook.com/v18.0/dialog/oauth
spring.security.oauth2.client.provider.facebook.token-uri=https://graph.facebook.com/v18.0/oauth/access_token
spring.security.oauth2.client.provider.facebook.user-info-uri=https://graph.facebook.com/v18.0/me?fields=id,name,email,picture
spring.security.oauth2.client.provider.facebook.user-name-attribute=id